<%- include('../../views/partials/header') %>

<main class="container mt-4">
  <h1 class="text-center mb-4">Add New Inventory Item</h1>
  
  <% if (message) { %>
    <div class="alert alert-<%= message.type || 'info' %>">
      <%- message.text %>
    </div>
  <% } %>
  
  <% if (errors && errors.length > 0) { %>
    <div class="alert alert-danger">
      <ul class="mb-0">
        <% errors.forEach(error => { %>
          <li><%= error.msg %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>
  
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-body">
          <form action="/inv/add-inventory" method="post">
            <!-- Classification -->
            <div class="mb-3">
              <label for="classification_id" class="form-label">Classification</label>
              <%- classificationList %>
            </div>
            
            <!-- Make -->
            <div class="mb-3">
              <label for="inv_make" class="form-label">Make</label>
              <input 
                type="text" 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_make') ? 'is-invalid' : '' %>" 
                id="inv_make" 
                name="inv_make" 
                required
                value="<%= inv_make || '' %>"
              >
            </div>
            
            <!-- Model -->
            <div class="mb-3">
              <label for="inv_model" class="form-label">Model</label>
              <input 
                type="text" 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_model') ? 'is-invalid' : '' %>" 
                id="inv_model" 
                name="inv_model" 
                required
                value="<%= inv_model || '' %>"
              >
            </div>
            
            <!-- Year -->
            <div class="mb-3">
              <label for="inv_year" class="form-label">Year</label>
              <input 
                type="number" 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_year') ? 'is-invalid' : '' %>" 
                id="inv_year" 
                name="inv_year" 
                min="1900"
                max="<%= new Date().getFullYear() + 1 %>"
                required
                value="<%= inv_year || '' %>"
              >
            </div>
            
            <!-- Description -->
            <div class="mb-3">
              <label for="inv_description" class="form-label">Description</label>
              <textarea 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_description') ? 'is-invalid' : '' %>" 
                id="inv_description" 
                name="inv_description" 
                rows="3"
                required
              ><%= inv_description || '' %></textarea>
            </div>
            
            <!-- Image Path -->
            <div class="mb-3">
              <label for="inv_image" class="form-label">Image Path</label>
              <input 
                type="text" 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_image') ? 'is-invalid' : '' %>" 
                id="inv_image" 
                name="inv_image" 
                value="<%= inv_image || '/images/vehicles/no-image.png' %>"
                required
              >
            </div>
            
            <!-- Thumbnail Path -->
            <div class="mb-3">
              <label for="inv_thumbnail" class="form-label">Thumbnail Path</label>
              <input 
                type="text" 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_thumbnail') ? 'is-invalid' : '' %>" 
                id="inv_thumbnail" 
                name="inv_thumbnail" 
                value="<%= inv_thumbnail || '/images/vehicles/no-image-tn.png' %>"
                required
              >
            </div>
            
            <!-- Price -->
            <div class="mb-3">
              <label for="inv_price" class="form-label">Price</label>
              <div class="input-group">
                <span class="input-group-text">$</span>
                <input 
                  type="number" 
                  class="form-control <%= errors && errors.some(e => e.param === 'inv_price') ? 'is-invalid' : '' %>" 
                  id="inv_price" 
                  name="inv_price" 
                  step="0.01"
                  min="0"
                  required
                  value="<%= inv_price || '' %>"
                >
              </div>
            </div>
            
            <!-- Miles -->
            <div class="mb-3">
              <label for="inv_miles" class="form-label">Miles</label>
              <input 
                type="number" 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_miles') ? 'is-invalid' : '' %>" 
                id="inv_miles" 
                name="inv_miles" 
                min="0"
                required
                value="<%= inv_miles || '' %>"
              >
            </div>
            
            <!-- Color -->
            <div class="mb-3">
              <label for="inv_color" class="form-label">Color</label>
              <input 
                type="text" 
                class="form-control <%= errors && errors.some(e => e.param === 'inv_color') ? 'is-invalid' : '' %>" 
                id="inv_color" 
                name="inv_color" 
                required
                value="<%= inv_color || '' %>"
              >
            </div>
            
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="submit" class="btn btn-primary me-md-2">Add Vehicle</button>
              <a href="/inv" class="btn btn-secondary">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>

<%- include('../../views/partials/footer') %>
